/* CSS Section */
body { font-family: 'Poppins', sans-serif; text-align: center; background: linear-gradient(135deg, #1e1e2e, #2a2a3d); color: #ffffff; margin: 0; padding: 20px; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; box-sizing: border-box; position: relative; }
h1 { font-size: clamp(32px, 8vw, 48px); margin: 15px 0; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); color: #00ffcc; letter-spacing: 2px; }
#gameLogo { width: clamp(120px, 40vw, 180px); height: auto; margin-bottom: 10px; filter: drop-shadow(0 0 15px #00ffcc); transition: transform 0.4s ease; border-radius: 50%; }
#gameLogo:hover { transform: scale(1.1) rotate(2deg); }
#desktopIcons { position: absolute; top: 20px; left: 20px; display: flex; gap: 15px; z-index: 10; }
#desktopIcons span { font-size: 28px; cursor: pointer; color: #ffffff; transition: transform 0.3s, color 0.3s; padding: 8px; border-radius: 50%; background: rgba(255, 255, 255, 0.1); }
#desktopIcons span:hover { color: #00ffcc; transform: scale(1.2); }
#homeIcon { position: absolute; top: 20px; right: 20px; font-size: 28px; cursor: pointer; color: #ffffff; transition: transform 0.3s, color 0.3s; padding: 8px; border-radius: 50%; background: rgba(255, 255, 255, 0.1); z-index: 10; }
#homeIcon:hover { color: #00ffcc; transform: scale(1.2); }
#mobileMenuBtn { position: absolute; top: 15px; left: 15px; font-size: 32px; cursor: pointer; color: #ffffff; padding: 8px; border-radius: 50%; background: rgba(255, 255, 255, 0.1); z-index: 20; display: none; }
#mobileMenu { position: absolute; top: 70px; left: 15px; background: rgba(40, 42, 54, 0.95); border-radius: 15px; padding: 15px; display: none; flex-direction: column; gap: 15px; z-index: 15; box-shadow: 0 8px 20px rgba(0,0,0,0.4); backdrop-filter: blur(10px); border: 1px solid #00ffcc; }
#mobileMenu span { font-size: 26px; cursor: pointer; padding: 12px; border-radius: 50%; background: rgba(255, 255, 255, 0.1); transition: all 0.3s; }
#mobileMenu span:hover { background: rgba(0, 255, 204, 0.2); transform: scale(1.1); }
#gameContainer { position: relative; width: 100%; max-width: 95vw; margin: 20px auto; }
#display { font-size: clamp(20px, 5vw, 28px); background: rgba(40, 42, 54, 0.9); padding: 15px 50px 15px 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); backdrop-filter: blur(5px); line-height: 1.6; box-sizing: border-box; display: none; cursor: text; white-space: nowrap; overflow-x: auto; -webkit-overflow-scrolling: touch; }
#display::-webkit-scrollbar { height: 5px; }
#display::-webkit-scrollbar-track { background: #2a2a3d; border-radius: 10px; }
#display::-webkit-scrollbar-thumb { background: #00ffcc; border-radius: 10px; }
#typingBox { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; border: none; background: transparent; resize: none; outline: none; color: transparent; caret-color: transparent; padding: 0; margin: 0; z-index: 2; }
.green-text { color: #00ff00; text-shadow: 0 0 5px rgba(0,255,0,0.5); }
.red-text { color: #ff4444; text-shadow: 0 0 5px rgba(255,68,68,0.5); }
.space-error { position: relative; display: inline-block; background-color: rgba(255, 68, 68, 0.3); border-radius: 3px; }

/* --- Blinking Cursor Style --- */
.cursor {
    position: relative;
    border-left: 2px solid #00ffcc;
    animation: blink 1s infinite steps(1, start);
}
@keyframes blink {
    50% { border-left-color: transparent; }
}

/* --- Graph Container Style --- */
.graph-container {
    width: 100%;
    max-width: 95vw;
    height: 150px; /* Adjust height as needed */
    margin: 15px auto;
    background: rgba(40, 42, 54, 0.7);
    border-radius: 15px;
    padding: 10px;
    box-sizing: border-box;
    display: none; /* Hidden by default */
}
#finalGraphContainer {
    height: 200px; /* Taller graph for result modal */
    display: block; /* Always visible inside the modal */
}

#statusIndicator { width: clamp(100px, 30vw, 130px); height: 40px; background: linear-gradient(45deg, #ff4444, #ff6666); margin: 15px auto; border-radius: 20px; line-height: 40px; font-size: clamp(18px, 5vw, 20px); font-weight: bold; box-shadow: 0 2px 10px rgba(255,68,68,0.3); transition: all 0.3s; opacity: 0; }
#statusIndicator.active { opacity: 1; }
#statusIndicator.green { background: linear-gradient(45deg, #4caf50, #66bb6a); box-shadow: 0 2px 10px rgba(76,175,80,0.3); }

#startButton, #restartButton, #downloadResultBtn, #showHighScoreBtn, #optionsBtn { padding: 12px 30px; font-size: clamp(18px, 5vw, 22px); margin: 10px; cursor: pointer; border: none; border-radius: 25px; background: linear-gradient(45deg, #4caf50, #66bb6a); color: white; transition: transform 0.3s, box-shadow 0.3s, opacity 0.5s; box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4); }
#startButton:hover, #restartButton:hover, #downloadResultBtn:hover, #showHighScoreBtn:hover, #optionsBtn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(76, 175, 80, 0.6); }
#optionsBtn { background: linear-gradient(45deg, #0088ff, #00ccff); box-shadow: 0 4px 15px rgba(0, 136, 255, 0.4); }
#optionsBtn:hover { box-shadow: 0 6px 20px rgba(0, 136, 255, 0.6); }
#restartButton:disabled { opacity: 0.6; cursor: not-allowed; transform: none; box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4); }
#resultButtons { display: none; flex-direction: column; width: 90%; max-width: 400px; gap: 15px; margin: 20px auto; }
#stats { font-size: clamp(16px, 4.5vw, 20px); margin-top: 20px; background: rgba(255, 255, 255, 0.05); padding: 12px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); max-width: 90vw; width: 100%; box-sizing: border-box; }
#message { font-size: clamp(16px, 4.5vw, 20px); margin-top: 20px; }

.modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(40, 42, 54, 0.98); padding: 20px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); width: 95%; max-width: 550px; z-index: 1000; backdrop-filter: blur(10px); border: 1px solid #00ffcc; max-height: 90vh; overflow: hidden; flex-direction: column; }
.small-modal { max-width: 450px; }
.modal-scroll-content { overflow-y: auto; padding-right: 10px; }
.modal-header { font-size: clamp(24px, 7vw, 28px); margin-bottom: 20px; color: #00ffcc; text-shadow: 0 0 10px #00ffcc; }
.interactive-header { cursor: pointer; }

#highScoreList, #resetScoreList { text-align: left; margin: 10px auto; width: 90%; max-width: 400px; }
.score-entry { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #3a3a4f; font-size: clamp(16px, 4.5vw, 18px); }
.score-entry:last-child { border-bottom: none; }
.score-difficulty { font-weight: bold; color: #00ffcc; flex-basis: 30%; }
.score-time { color: #ffffff; flex-basis: 50%; text-align: right; }
.score-actions { flex-basis: 20%; text-align: right; }
.info-icon, .delete-icon { cursor: pointer; font-size: 22px; transition: transform 0.2s; }
.info-icon:hover, .delete-icon:hover { transform: scale(1.2); }
#scoreInfoContent { text-align: left; font-size: 16px; line-height: 1.8; }
#scoreInfoContent p { margin: 8px 0; }
#scoreInfoContent strong { color: #00ffcc; }

#resultText { background: rgba(0,0,0,0.4); padding: 15px; border-radius: 15px; font-size: clamp(14px, 4vw, 17px); line-height: 2; margin: 20px 0; text-align: left; border: 1px dashed #00ffcc; color: #ffffff; white-space: pre-wrap; font-family: 'Courier New', monospace; }
.download-btn, .share-btn { width: 90%; max-width: 350px; padding: 12px; font-size: clamp(16px, 4.5vw, 20px); margin: 10px auto; display: block; border: none; border-radius: 25px; cursor: pointer; color: white; transition: transform 0.2s ease; }
.download-btn { background: linear-gradient(45deg, #0088ff, #00ccff); box-shadow: 0 4px 15px rgba(0, 136, 255, 0.4); }
.share-btn { background: linear-gradient(45deg, #8e44ad, #9b59b6); box-shadow: 0 4px 15px rgba(142, 68, 173, 0.4); }
.download-btn:hover, .share-btn:hover { transform: translateY(-3px); }
#toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: #00ff88; color: black; padding: 15px 30px; border-radius: 50px; font-weight: bold; z-index: 2000; display: none; box-shadow: 0 5px 15px rgba(0,255,0,0.3); }
.modal-close { position: absolute; top: 15px; right: 20px; font-size: 30px; color: #ff4444; cursor: pointer; z-index: 2; }
.modal-close:hover { color: #ff6666; }
.modal-content { display: none; font-size: clamp(15px, 4vw, 16px); text-align: left; color: #ffffff; }
.modal-content.active { display: block; }
.modal-buttons { display: flex; justify-content: space-around; flex-wrap: wrap; gap: 10px; }
.modal-button { padding: 10px 20px; font-size: 18px; border: none; border-radius: 20px; cursor: pointer; min-width: 100px; transition: background 0.3s, transform 0.2s; }
.modal-button:hover { transform: translateY(-2px); }
.green-bg { background: linear-gradient(45deg, #4caf50, #66bb6a); color: white; }
.grey-bg { background: linear-gradient(45deg, #666, #999); color: white; }
.danger-btn { background: linear-gradient(45deg, #c0392b, #e74c3c); color: white; }
.danger-btn:hover { box-shadow: 0 0 15px rgba(231, 76, 60, 0.6); }

.options-section { margin-top: 15px; }
.options-title { font-size: 20px; color: #ffffff; margin-bottom: 15px; border-bottom: 1px solid #00ffcc; padding-bottom: 10px; }
.difficulty-btn, .mode-btn, .time-btn { background: linear-gradient(45deg, #666, #999); color: white; }
.difficulty-btn.active, .mode-btn.active, .time-btn.active { background: linear-gradient(45deg, #0088ff, #00ccff); box-shadow: 0 0 15px rgba(0, 170, 255, 0.6); }

.tooltip { position: absolute; top: -45px; left: 50%; transform: translateX(-50%); background-color: #00ffcc; color: #1e1e2e; padding: 8px 15px; border-radius: 8px; font-size: 16px; font-weight: bold; z-index: 5; display: none; transition: opacity 0.3s; pointer-events: none; white-space: nowrap; box-shadow: 0 4px 10px rgba(0, 255, 204, 0.3); }

.restart-same-icon-top { position: absolute; top: 50%; right: 15px; transform: translateY(-50%); font-size: 26px; cursor: pointer; transition: transform 0.2s ease-in-out; display: none; z-index: 3; }
.restart-same-icon-top:hover { transform: translateY(-50%) scale(1.2) rotate(90deg); }

#adModal { display: none; justify-content: center; align-items: center; flex-direction: column; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); z-index: 9998; opacity: 1; transition: opacity 0.3s ease; }
#adContent { max-width: 90%; max-height: 80%; }
#adContent img { max-width: 100%; max-height: 100%; object-fit: contain; }
#skipAdBtn { display: none; position: absolute; top: 20px; right: 20px; padding: 10px 20px; font-size: 18px; background: #ff4444; color: white; border: none; border-radius: 25px; cursor: pointer; z-index: 9999; }
#adTimer { position: absolute; top: 20px; right: 20px; color: white; background: rgba(0,0,0,0.7); padding: 10px; border-radius: 50%; font-size: 20px; }
#watchAdAgainBtn { position: absolute; bottom: 15px; right: 20px; font-size: 20px; cursor: pointer; background: rgba(0, 255, 204, 0.2); color: #00ffcc; width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center; transition: all 0.3s ease; z-index: 2; opacity: 0; pointer-events: none; }
#watchAdAgainBtn.visible { opacity: 1; pointer-events: auto; }
#watchAdAgainBtn:hover { transform: scale(1.1); background: rgba(0, 255, 204, 0.4); }
#ad-clone { position: fixed; background: rgba(0, 0, 0, 0.9); z-index: 10000; border: 1px solid #00ffcc; box-sizing: border-box; transition: all 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55); }
@media (min-width: 768px) { #resultButtons { flex-direction: row; justify-content: center; } #mobileMenuBtn, #mobileMenu { display: none !important; } }
@media (max-width: 767px) { #desktopIcons, #homeIcon { display: none; } #mobileMenuBtn { display: block; } body { padding-top: 70px; } }